package com.thoughtworks.xstream.builder;

import java.util.ArrayList;
import java.util.List;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.builder.processor.FieldConfigProcessor;
import com.thoughtworks.xstream.builder.processor.TypeConfigProcessor;

/**
 * A field configuration.
 *
 * @author Guilherme Silveira
 * @TODO gs: extract public interface, keep implementation hidden from the end user?
 */
public class FieldConfig implements TypeConfigProcessor {

	private final String fieldName;
    private final List processors;

    public FieldConfig(String fieldName) {
		this.fieldName = fieldName;
        this.processors = new ArrayList();
	}

	public void process(XStream instance, Class type) {
        for(int i=0;i < processors.size();i++) {
            FieldConfigProcessor node = (FieldConfigProcessor) processors.get(i);
            node.process(instance, type, fieldName);
        }
	}

	public FieldConfig with(FieldConfigProcessor []processors) {
        for (int i = 0; i < processors.length; i++) {
            FieldConfigProcessor processor = processors[i];
			this.processors.add(processor);
		}
		return this;
	}

    public FieldConfig with(FieldConfigProcessor processor) {
        this.processors.add(processor);
        return this;
    }

}
